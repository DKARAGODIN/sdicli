# SDICLI

Диаграмма: [link](https://drive.google.com/file/d/1oOyFDbzb-k4jFylwcKNzB57CGmUAdjKh/view?usp=sharing)

TODO (Добавить финальную версию диаграммы)

## Общее описание системы

Основной класс Interpreter считывает команды, которые вводит пользователь. 

Считанную команду он передает Scanner'у, который выполняет подстановку, а затем разбивает эту строку на лексемы. 

Полученные лексемы передаются Parser'у, который анализирует их и формирует команды с их аргументами, либо создает переменную окружения. 

Сформированные команды передаются на выполнение Runner'у, который запускает их в порядке конвеера. Interpreter выводит пользователю результат выполнения Runner'а: это либо вывод последней команды, либо сообщение об ошибке.

## Scanner

TODO:

Какие лексемы выделяет

Какие символы разрешены в имени команды/переменной

Возможно анализ простой и достаточно регулярных выражений

## Parser

TODO

## Runner

Runner получает на вход список команд. Все команды реализуют одинаковый интерфейс. Все команды имеют в качестве поля список аргументов и имеют
метод run. Метод run принимает абстрактный ридер (далее - входящий ридер) и возвращает абстрактный ридер (далее - исходящий ридер), 
чтобы можно было строить цепочки. Также этот метод декларирует то что он выбрасывает исключение.

Использование абстрактных ридеров в качестве параметров позволяет менять возможные реализации. 
Мы можем читать или писать данные по сети, из файлов, из объектов. Для нашей программы это будет неважно.

Все команды реализуют логику работы в методе run. Команды могут использовать данные полученные через аргументы, а могут 
не использовать. Команды могут использовать информацию из входящего ридера, а могут не использовать. Эти детали 
зависят от реализации конкретной команды. Главное, что все команды возвращают исходящий ридер. Из этого ридера можно будет 
считывать результаты работы команды.

Runner проверяет результативность выполнения команды. Если в ходе работы команды было выброшено исключение, то оно 
перехватывается и об этом сообщается пользователю. Последующие команды не выполняются.

После выполнения всех команд Runner считывает информацию из последнего исходящего ридера, и отправляет ее на консоль.

### Список всех доступных команд:

#### EchoCommand

Echo игнорирует все что поступило во входящем ридере. Выводит в исходящий ридер все свои аргументы через один пробел.

#### CatCommand

Cat выводит содержимое файлов, которые указаны в аргументах. 
Если файлы не указаны, тогда команда перенаправляет содержимое входящего ридера в исходящий ридер.

#### WcCommand

Wc выводит количество строк, слов и байт в файлах, которые указаны в аргументах. 
Если файлы не указаны, тогда команда выводит количество строк, слов и байт в данных входящего ридера.

#### PwdCommand

Pwd выводит полный путь текущей директории. Игнорирует данные во входящем ридере и игнорирует аргументы.

#### ExecuteCommand

Execute выполняет произвольную команду. На вход команде передаются аргументы. Стандартный потоки входа читает данные из
входящего ридера, а стандартный поток вывода записывает данные в исходящий ридер.

#### ExitCommand

Команда завершает работу интерпретатора.
